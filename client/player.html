<template name='player'>

  <script type="text/javascript" src="www.youtube.com/iframe_api"></script>

  <div id="wrapper">

    <div class="units-row">

      <div id='name-bar' class="unit-30 unit-push-10">

        <div class="units-row">

          <a class='sub-link' href="{{subreddit_link}}" target='__blank'>
            {{subreddit_title}}
          </a>

          <a href="{{mutliuserLink}}" target='__blank' class="multi-link">
            <br>
            {{mutliuser}}
          </a>

        </div>

      </div>

      <div id='post-bar' class="unit-60 unit-push-right">

        {{#if loading}}

          <div id="loading" class="units-row">
            <h1>Loading...</h1>
          </div>

        {{else}}

          {{#if pageError}}

            <div id="page-error" class='units-row'>
              <div class="unit-80 unit-centered">

                <p id="displayMessage">
                  {{displayMessage}}
                  <p id="displayLink">
                    <a href="{{displayLink}}">{{displayLink}}</a>
                  </p>
                </p>

                {{> catBar}}
              </div>
            </div>

          {{else}}

            {{#each posts}}
              {{> song}}
            {{/each}}

          {{/if}}

        {{/if}}

      </div>

    </div>

    {{> controls}}

  </div>

</template>

<template name='song'>

  <div id='song-{{name}}' class="song units-row">
    <div class="video-col unit-centered unit-100">

      <img id='thumbnail-{{name}}' class='thumbnail' src="{{thumbnail}}" onerror='console.log("test")'/>

      <!-- Holder for the youtube video -->
      <div id='video-{{name}}' class='player'></div>

      <div id='post-row' class="units-row">
        <div class="post-title unit-100">
          <a href="{{url}}" target='_blank'>
            {{title}}
          </a>
        </div>
      </div>

      <ul id="info-row" class='blocks-3 blocks-mobile-3'>
        <li class="post-user">
          <a href="{{user_link}}" target='_blank'>
            {{user_name}}
          </a>
        </li>
        <li class="post-user">
          <a href="{{comment_link}}" target='_blank'>
            {{num_comments}} comments
          </a>
        </li>
        <li class="post-user">
          {{#if isMulti}}
          <a href="{{post_sub_link}}">
            posted to r/{{post_subreddit}}
          </a>
          {{/if}}
        </li>
      </ul>

    </div>
  </div>

</template>

<template name='controls'>
  <div id="player-controls">
    {{#if canPrev}}
      <img id='prev-button' class='can pointer' src="/icons/prev.svg">
    {{else}}
      <img class='cant' src="/icons/prev_cant.svg">
    {{/if}}

    {{#if playing}}
      {{#if canPause}}
        <img id='pause-button' class='can pointer' src="/icons/pause2.svg">
      {{else}}
        <img id='pause-button-cant' class='cant' src="/icons/pause_cant.svg">
      {{/if}}
    {{else}}
      {{#if canPlay}}
        <img id='play-button' class='pointer' src="/icons/play.svg">
      {{else}}
        <img id='play-button-cant' class='cant' src="/icons/play_cant.svg">
      {{/if}}
    {{/if}}

    {{#if canNext}}
      <img id='next-button' class='pointer' src="/icons/next.svg">
    {{else}}
      <img class='cant' src="/icons/next_cant.svg">
    {{/if}}

    {{#if canEye}}
      <img id='eye-button' src="/icons/eye.svg">
    {{else}}
      <img id='eye-button-cant' class='cant pointer' src="/icons/eye_cant.svg">
    {{/if}}
  </div>
</template>
